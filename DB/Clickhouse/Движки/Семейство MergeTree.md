
–û—Ç–ª–∏—á–Ω–æ, —Ç—ã —Ö–æ—á–µ—à—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –¥–≤–∏–∂–∫–∞–º–∏ —Ç–∞–±–ª–∏—Ü **`MergeTree` –∏ –µ–≥–æ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—è–º–∏ –≤ ClickHouse** ‚Äî —ç—Ç–æ **–æ—á–µ–Ω—å –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞**, –µ—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä—ë–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä–æ–∏—à—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É.

---

# üìö –í–≤–µ–¥–µ–Ω–∏–µ: —Å–µ–º–µ–π—Å—Ç–≤–æ `MergeTree`

–í—Å–µ –¥–≤–∏–∂–∫–∏ –∏–∑ —Å–µ–º–µ–π—Å—Ç–≤–∞ `MergeTree`:
- –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **—Å–ª–∏–≤–∞—é—Ç (merge) –ø–∞—Ä—Ç–∏—Ü–∏–∏**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç **–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è **OLAP-–∑–∞–ø—Ä–æ—Å–æ–≤**

‚û°Ô∏è –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–≤–∏–∂–∫–æ–≤ –¥–ª—è —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ ClickHouse.

---

## üîπ 1. `MergeTree`

### ‚úÖ –°–∞–º—ã–π –±–∞–∑–æ–≤—ã–π –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- –ù—É–∂–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE visits (
    event_date Date,
    event_time DateTime,
    user_id UInt64,
    page String,
    duration Int32
) ENGINE = MergeTree()
ORDER BY (event_date, user_id)
PARTITION BY toYYYYMM(event_date);
```

> ‚ö†Ô∏è `MergeTree` —Å–∞–º –Ω–µ —É–¥–∞–ª—è–µ—Ç –∏–ª–∏ –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã ‚Äî –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ.

---

## üîπ 2. `ReplacingMergeTree`

### üéØ –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–∞ —ç—Ç–∞–ø–µ –º—ë—Ä–¥–∂–∞

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–¥—É–±–ª–∏–∫–∞—Ç—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ Kafka)
- –ù—É–∂–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–µ–π**

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE logs (
    id UInt64,
    event_time DateTime,
    message String
) ENGINE = ReplacingMergeTree()
ORDER BY (id, event_time)
```

‚û°Ô∏è –ü—Ä–∏ —Å–ª–∏—è–Ω–∏–∏ –∫—É—Å–∫–æ–≤ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å** –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π

> –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å—Ç–æ–ª–±–µ—Ü –≤–µ—Ä—Å–∏–∏:
```sql
ENGINE = ReplacingMergeTree(version)
```
–¢–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∞ —Å **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π**

---

## üîπ 3. `SummingMergeTree`

### üéØ –°—É–º–º–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—à—å –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö
- –ß–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–∏–ø–∞ `SELECT sum(...) GROUP BY ...`
- –•–æ—á–µ—à—å —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø—Ä–µ–¥–∞–≥—Ä–µ–≥–∞—Ü–∏—é

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE sales (
    event_date Date,
    product_id UInt32,
    quantity UInt32,
    revenue Decimal(10, 2)
) ENGINE = SummingMergeTree()
ORDER BY (event_date, product_id)
```

‚û°Ô∏è –í—Å–µ –ø–æ–ª—è, –∫—Ä–æ–º–µ –∫–ª—é—á–µ–≤—ã—Ö, –±—É–¥—É—Ç —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –º—ë—Ä–¥–∂–µ

> –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å:
```sql
ENGINE = SummingMergeTree(revenue)  -- —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ revenue
```

---

## üîπ 4. `AggregatingMergeTree`

### üéØ –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AggregateFunction(...)`)
  
#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE user_stats (
    user_id UInt64,
    event_date Date,
    pageviews SimpleAggregateFunction(sum, UInt64),
    session_durations AggregateFunction(aggState, Float32)
) ENGINE = AggregatingMergeTree()
ORDER BY (user_id, event_date)
```

> –¢–∏–ø—ã:
- `SimpleAggregateFunction(...)` ‚Äî –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–≥—Ä–µ–≥–∞—Ü–∏–π (`sum`, `min`, `max`)
- `AggregateFunction(...)` ‚Äî –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö (`uniq`, `quantile`, `groupArray`)

---

## üîπ 5. `CollapsingMergeTree`

### üéØ –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é "—Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏—è" (collapsing)

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ï—Å—Ç—å —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, like / unlike)
- –ù—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE actions (
    user_id UInt64,
    action_type Enum8('Add' = 1, 'Remove' = -1),
    event_date Date
) ENGINE = CollapsingMergeTree(action_type)
ORDER BY (user_id, event_date)
```

‚û°Ô∏è –ü—Ä–∏ –º—ë—Ä–¥–∂–µ:
- –ó–∞–ø–∏—Å–∏ —Å `action_type = 1` –∏ `action_type = -1` **—Å—Ö–ª–æ–ø—ã–≤–∞—é—Ç—Å—è**

---

## üîπ 6. `VersionedCollapsingMergeTree`

### üéØ –¢–æ –∂–µ, —á—Ç–æ –∏ `CollapsingMergeTree`, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–µ—Ä—Å–∏—è–º–∏

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ú–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE events (
    key UInt32,
    sign Int8,
    version UInt32,
    value String
) ENGINE = VersionedCollapsingMergeTree(sign, version)
ORDER BY key
```

> –ó–¥–µ—Å—å `sign` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å—Ç—Ä–æ–∫–∏ (`+1` / `-1`)  
> `version` ‚Äî –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## üîπ 7. `GraphiteMergeTree`

### üéØ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –†–∞–çÏù¥ÌÑ∞ –≥—Ä–∞—Ñ–∏—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∏)
- –ù—É–∂–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE graphite_data (
    Path String,
    Time UInt32,
    Value Float64,
    Version UInt32
) ENGINE = GraphiteMergeTree('graphite_rollup')
ORDER BY Path
```

‚û°Ô∏è –¢—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `graphite_rollup` –≤ `config.xml`  
‚û°Ô∏è –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–∂–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü

---

## üîÅ 8. `ReplicatedMergeTree` –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è

–í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –¥–≤–∏–∂–∫–∏ –∏–º–µ—é—Ç **—Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é**:
- `ReplicatedMergeTree`
- `ReplicatedReplacingMergeTree`
- `ReplicatedSummingMergeTree`

#### –ü—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE replicated_visits (
    event_date Date,
    user_id UInt64,
    page String
) ENGINE = ReplicatedMergeTree('/clickhouse/tables/{shard}/visits', '{replica}')
ORDER BY (event_date, user_id)
```

> –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã

---

# üß† –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤–∏–∂–∫–æ–≤

| –î–≤–∏–∂–æ–∫ | –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–µ–π | –ê–≥—Ä–µ–≥–∞—Ü–∏—è | –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π | –í–µ—Ä—Å–∏–∏ | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è |
|--------|------------------|------------|----------------|----------|-------------|
| `MergeTree` | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚úÖ –î–∞ |
| `ReplacingMergeTree` | ‚úÖ –î–∞ | ‚ùå | ‚ùå | ‚ùå | ‚úÖ –î–∞ |
| `SummingMergeTree` | ‚ùå | ‚úÖ –î–∞ | ‚ùå | ‚ùå | ‚úÖ –î–∞ |
| `AggregatingMergeTree` | ‚ùå | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `AggregateFunction` | ‚ùå | ‚ùå | ‚úÖ –î–∞ |
| `CollapsingMergeTree` | ‚ùó –°—Ö–ª–æ–ø—ã–≤–∞–µ—Ç –ø–æ `sign` | ‚ùå | ‚úÖ –î–∞ | ‚ùå | ‚úÖ –î–∞ |
| `VersionedCollapsingMergeTree` | ‚ùó –ü–æ `sign` –∏ `version` | ‚ùå | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| `GraphiteMergeTree` | ‚ùå | ‚úÖ –î–∞ (–≥—Ä–∞—Ñ–∏—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏) | ‚ùå | ‚ùå | ‚úÖ –î–∞ |

---

## üîÑ –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å?

| –ß—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–≤–∏–∂–æ–∫ |
|----------------|-----------------------|
| –û–±—ã—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ | ‚úÖ `MergeTree` |
| –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã | ‚úÖ `ReplacingMergeTree` |
| –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ | ‚úÖ `SummingMergeTree` |
| –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | ‚úÖ `AggregatingMergeTree` |
| –°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å | ‚úÖ `CollapsingMergeTree` |
| –°–ª–æ–∂–Ω—ã–µ —Å–ª—É—á–∞–∏ —Å –≤–µ—Ä—Å–∏—è–º–∏ | ‚úÖ `VersionedCollapsingMergeTree` |
| –ì—Ä–∞—Ñ–∏–∫–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ | ‚úÖ `GraphiteMergeTree` |
| –†–µ–ø–ª–∏–∫–∞—Ü–∏—è | ‚úÖ –ü–æ—á—Ç–∏ –≤—Å–µ –¥–≤–∏–∂–∫–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å `Replicated...MergeTree` |

---

## üß™ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–ü–æ–ø—Ä–æ–±—É–π —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å `ReplacingMergeTree`, –≤—Å—Ç–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏ –ø—Ä–æ–≤–µ—Ä—å, –∫–∞–∫ –æ–Ω–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –º—ë—Ä–¥–∂–∞:

```sql
CREATE TABLE users_log (
    user_id UInt64,
    name String
) ENGINE = ReplacingMergeTree()
ORDER BY user_id;

INSERT INTO users_log VALUES (1, 'Alice'), (1, 'Alicia');

OPTIMIZE TABLE users_log FINAL;  -- –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º –º—ë—Ä–¥–∂

SELECT * FROM users_log;
```

---

## üìù –°–æ–≤–µ—Ç—ã:

| –°–æ–≤–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| –ò—Å–ø–æ–ª—å–∑—É–π `ORDER BY`, –∞ –Ω–µ `PRIMARY KEY` | –ß—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è |
| –ò—Å–ø–æ–ª—å–∑—É–π `PARTITION BY` –ø–æ –¥–∞—Ç–µ | –õ–æ–≥–∏—á–Ω–æ –¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –∏–ª–∏ –º–µ—Å—è—Ü–∞–º |
| –î–æ–±–∞–≤–ª—è–π `OPTIMIZE TABLE` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | –ù–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω ‚Äî –≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| –î–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π `AggregatingMergeTree` + `*-State` —Ñ—É–Ω–∫—Ü–∏–∏ | –ù–∞–ø—Ä–∏–º–µ—Ä, `sumState`, `uniqState` –∏ —Ç.–¥. |
| –†–µ–ø–ª–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç ZooKeeper / Keeper | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–µ–º–∞ |
